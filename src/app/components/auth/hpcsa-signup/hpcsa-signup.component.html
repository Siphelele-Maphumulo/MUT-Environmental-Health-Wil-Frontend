<div class="container d-flex align-items-center justify-content-center min-vh-100">
  <!-- Image Section -->
  <div class="image-section">
    <img
      src="./MUT-DoEH-Logo-Stacked.png"
      alt="WIL System Image"
      style="width: 50%; margin-top: -50px"
    />
  </div>

  <!-- Signup Card Section -->
  <mat-card class="signup-card" style="padding-left: 1%; padding-top: 5%">
    <mat-card-header>
      <mat-card-title style="font-weight:600; padding-top: -10%">HPCSA SIGN UP</mat-card-title>

    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        <!-- First Row: HPCSA Number and Email -->
        <div class="form-row">
          <!-- HPCSA Number Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>HPCSA Number</mat-label>
            <mat-icon matPrefix>badge</mat-icon>
            <input
              matInput
              formControlName="hi_number"
              placeholder="Enter HPCSA number"
            />
            <mat-error *ngIf="signupForm.get('hi_number')?.hasError('required')">
              Required
            </mat-error>
          </mat-form-field>

          <!-- Email Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Email</mat-label>
            <mat-icon matPrefix>email</mat-icon>
            <input
              matInput
              formControlName="email"
              type="email"
              placeholder="Enter your email"
            />
            <mat-error *ngIf="signupForm.get('email')?.hasError('required')">
              Required
            </mat-error>
            <mat-error *ngIf="signupForm.get('email')?.hasError('email')">
              Invalid email
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Second Row: Name and Surname -->
        <div class="form-row">
          <!-- Name Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Name</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <input
              matInput
              formControlName="name"
              placeholder="Enter your name"
            />
            <mat-error *ngIf="signupForm.get('name')?.hasError('required')">
              Required
            </mat-error>
          </mat-form-field>

          <!-- Surname Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Surname</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <input
              matInput
              formControlName="surname"
              placeholder="Enter your surname"
            />
            <mat-error *ngIf="signupForm.get('surname')?.hasError('required')">
              Required
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Third Row: Contact and Signature -->
        <div class="form-row">
          <!-- Contact Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Contact Number</mat-label>
            <mat-icon matPrefix>phone</mat-icon>
            <input
              matInput
              formControlName="contact"
              placeholder="Enter contact number"
            />
          </mat-form-field>

          <!-- Signature Upload Field -->
          <div class="half-width signature-upload">
            <label for="signature-upload">HPCSA Signature</label>
            <input
              type="file"
              id="signature-upload"
              (change)="onFileSelected($event)"
              accept="image/*"
              style="display: none"
              #fileInput
            />
            <button
              mat-stroked-button
              type="button"
              (click)="fileInput.click()"
              class="upload-btn"
            >
              <mat-icon>upload</mat-icon>
              Select File
            </button>
            <span class="file-name" *ngIf="selectedFile">
              {{ selectedFile.name }}
            </span>
          </div>
        </div>

        <!-- Fourth Row: Password and Confirm Password -->
        <div class="form-row">
          <!-- Password Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Password</mat-label>
            <mat-icon matPrefix>lock</mat-icon>
            <input
              matInput
              formControlName="password"
              [type]="hide ? 'password' : 'text'"
              placeholder="Enter password"
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hide = !hide"
              type="button"
            >
              <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
            <mat-error *ngIf="signupForm.get('password')?.hasError('required')">
              Required
            </mat-error>
            <mat-error *ngIf="signupForm.get('password')?.hasError('minlength')">
              Min 7 characters
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password Field -->
          <mat-form-field appearance="fill" class="half-width">
            <mat-label>Confirm Password</mat-label>
            <mat-icon matPrefix>lock</mat-icon>
            <input
              matInput
              formControlName="confirmPassword"
              [type]="hideConfirm ? 'password' : 'text'"
              placeholder="Confirm password"
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hideConfirm = !hideConfirm"
              type="button"
            >
              <mat-icon>{{ hideConfirm ? "visibility_off" : "visibility" }}</mat-icon>
            </button>
            <mat-error *ngIf="signupForm.get('confirmPassword')?.hasError('required')">
              Required
            </mat-error>
            <mat-error *ngIf="signupForm.hasError('mismatch')">
              Passwords don't match
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Submit Button -->
        <div class="actions">
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="loading"
          >
            <span *ngIf="!loading">Sign Up</span>
            <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
          </button>
        </div>
      </form>
    </mat-card-content>

    <mat-card-actions class="additional-actions">
      <p style="padding-left: 14%">
        Already have an account?
        <a (click)="login()" class="sign-in-link">Login here</a>
      </p>
    </mat-card-actions>
  </mat-card>
</div>