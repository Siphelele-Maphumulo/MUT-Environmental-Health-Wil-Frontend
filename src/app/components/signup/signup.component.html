<div class="container-fluid d-flex align-items-center justify-content-center min-vh-100 main-content">
    <div class="login-form-container shadow p-3 rounded">
        <h2 class="form-heading mb-4 text-center">Sign-Up</h2>
        <form (ngSubmit)="onSubmit()" #signupForm="ngForm">
            <!-- User Type Selection -->
            <div class="text-center mb-2">
                <input type="radio" id="student" name="userType" value="student" [(ngModel)]="userType" (change)="onUserTypeChange('student')" checked>
                <label for="student" style="padding-right: 10%; margin-right: 0%;">Student</label>
                <input type="radio" id="personnel" name="userType" value="personnel" [(ngModel)]="userType" (change)="onUserTypeChange('personnel')">
                <label for="personnel">Personnel</label>
            </div>

            <div class="row">
                <!-- First Column (Left) -->
                <div class="col-md-6">
                    <!-- Student ID or Personnel ID -->
                    <div class="form-group">
                        <label for="studentNumber">{{usernameLabel}}:</label>
                        <input
                            type="text"
                            id="studentNumber"
                            class="form-control"
                            [(ngModel)]="studentNumber"
                            name="studentNumber"
                            required
                            pattern="^[a-zA-Z0-9]{8}$"
                            minlength="8"
                            maxlength="8"
                            #studentNumberInput="ngModel"
                        />
                        <div *ngIf="studentNumberInput.invalid && (studentNumberInput.touched)">
                            <small class="text-danger" *ngIf="studentNumberInput.errors?.['required']">This field is required.</small>
                            <small class="text-danger" *ngIf="studentNumberInput.errors?.['pattern']">Must be exactly 8 alphanumeric characters.</small>
                        </div>
                    </div>
                </div>

                <!-- Second Column (Right) -->
                <div class="col-md-6">
                    <!-- Role (Personnel Only) -->
                    <div *ngIf="userType === 'personnel'" class="form-group">
                        <label for="role" style="font-size: 16px; color: #000;">Role:</label>
                        <select
                            id="role"
                            class="form-control"
                            [(ngModel)]="role"
                            name="role"
                            required
                            #roleInput="ngModel"
                            style="font-size: 16px; color: #000; background-color: #fff; padding: 8px;"
                        >
                            <option value="" disabled selected style="font-size: 16px; color: #888;">Select Role</option>
                            <option value="Supervisor/Mentor" style="font-size: 16px; color: #000;">Supervisor/Mentor</option>
                            <option value="HPCSA Auditor" style="font-size: 16px; color: #000;">HPCSA Auditor</option>
                        </select>
                        <div *ngIf="roleInput.invalid && roleInput.touched">
                            <small class="text-danger" *ngIf="roleInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>
                </div>

                <!-- First Column (Left) Continued -->
                <div class="col-md-6">
                    <!-- Title (Personnel Only) -->
                    <div *ngIf="userType === 'personnel'" class="form-group">
                        <label for="title">Title:</label>
                        <select
                        id="title"
                        class="form-control"
                        [(ngModel)]="title"
                        name="title"
                        required
                        (ngModelChange)="validateTitle()"
                        #titleInput="ngModel"
                        style="font-size: 16px; color: #000; background-color: #fff; padding: 8px;"
                    >
                        <option value="" disabled selected style="font-size: 16px; color: #888;">Select Title</option>
                        <option value="Dr" style="font-size: 16px; color: #000;">Dr</option>
                        <option value="Mr" style="font-size: 16px; color: #000;">Mr</option>
                        <option value="Mrs" style="font-size: 16px; color: #000;">Mrs</option>
                        <option value="Miss" style="font-size: 16px; color: #000;">Miss</option>
                        <option value="Ms" style="font-size: 16px; color: #000;">Ms</option>
                    </select>
                    
                        <div *ngIf="titleError || (titleInput.invalid && titleInput.touched)">
                            <small class="text-danger">{{ titleError }}</small>
                            <small class="text-danger" *ngIf="titleInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>

                    <!-- Surname -->
                    <div class="form-group">
                        <label for="surname">Surname:</label>
                        <input type="text" id="surname" class="form-control" [(ngModel)]="surname" name="surname" required #surnameInput="ngModel" />
                        <div *ngIf="surnameInput.invalid && surnameInput.touched">
                            <small class="text-danger" *ngIf="surnameInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>

                    <!-- Contact (Personnel Only) -->
                    <div *ngIf="userType === 'personnel'" class="form-group">
                        <label for="contact">Contact:</label>
                        <input
                            type="text"
                            id="contact"
                            class="form-control"
                            [(ngModel)]="contact"
                            name="contact"
                            required
                            pattern="^\d{10,13}$"
                            #contactInput="ngModel"
                        />
                        <div *ngIf="contactInput.invalid && contactInput.touched">
                            <small class="text-danger" *ngIf="contactInput.errors?.['required']">This field is required.</small>
                            <small class="text-danger" *ngIf="contactInput.errors?.['pattern']">Contact must be between 10 and 13 digits.</small>
                        </div>
                    </div>
                </div>

                <!-- Second Column (Right) Continued -->
                <div class="col-md-6">
                    <!-- Initials (Personnel Only) -->
                    <div *ngIf="userType === 'personnel'" class="form-group">
                        <label for="initials">Initials:</label>
                        <input type="text" id="initials" class="form-control" [(ngModel)]="initials" name="initials" required #initialsInput="ngModel" />
                        <div *ngIf="initialsInput.invalid && initialsInput.touched">
                            <small class="text-danger" *ngIf="initialsInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>

                    <!-- Full Names -->
                    <div class="form-group">
                        <label for="names">Full Names:</label>
                        <input type="text" id="names" class="form-control" [(ngModel)]="names" name="names" required #namesInput="ngModel" />
                        <div *ngIf="namesInput.invalid && namesInput.touched">
                            <small class="text-danger" *ngIf="namesInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>

                    <!-- Gender (Personnel Only) -->
                    <div *ngIf="userType === 'personnel'" class="form-group">
                        <label for="gender" style="font-size: 16px; color: #000;">Gender:</label>
                        <select
                            id="gender"
                            class="form-control"
                            [(ngModel)]="gender"
                            name="gender"
                            required
                            #genderInput="ngModel"
                            style="font-size: 16px; color: #000; background-color: #fff; padding: 8px;"
                        >
                            <option value="" disabled selected style="font-size: 16px; color: #888;">Select Gender</option>
                            <option value="Male" style="font-size: 16px; color: #000;">Male</option>
                            <option value="Female" style="font-size: 16px; color: #000;">Female</option>
                        </select>
                        <div *ngIf="genderInput.invalid && genderInput.touched">
                            <small class="text-danger" *ngIf="genderInput.errors?.['required']">This field is required.</small>
                        </div>
                    </div>
                </div>

                <!-- Email Field (Full Width) -->
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input
                            type="email"
                            id="email"
                            class="form-control"
                            [(ngModel)]="email"
                            name="email"
                            required
                            pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                            #emailInput="ngModel"
                        />
                        <div *ngIf="emailInput.invalid && emailInput.touched">
                            <small class="text-danger" *ngIf="emailInput.errors?.['required']">Email is required.</small>
                            <small class="text-danger" *ngIf="emailInput.errors?.['pattern']">Please enter a valid email address.</small>
                        </div>
                    </div>
                </div>
                <!-- Password and Confirm Password Side by Side -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input
                            type="password"
                            id="password"
                            class="form-control"
                            [(ngModel)]="password"
                            name="password"
                            required
                            minlength="8"
                            #passwordInput="ngModel"
                            (input)="validatePasswordsMatch()"
                        />
                        <div *ngIf="passwordInput.invalid && passwordInput.touched">
                            <small class="text-danger" *ngIf="passwordInput.errors?.['required']">Password is required.</small>
                            <small class="text-danger" *ngIf="passwordInput.errors?.['minlength']">Password must be at least 8 characters.</small>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password:</label>
                        <input
                            type="password"
                            id="confirmPassword"
                            class="form-control"
                            [(ngModel)]="confirmPassword"
                            name="confirmPassword"
                            required
                            #confirmPasswordInput="ngModel"
                            (input)="validatePasswordsMatch()"
                        />
                        <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched">
                            <small class="text-danger" *ngIf="confirmPasswordInput.errors?.['required']">Confirmation password is required.</small>
                        </div>
                        <div *ngIf="passwordError">
                            <small class="text-danger">{{ passwordError }}</small>
                        </div>
                    </div>
                </div>


                <!-- Submit Button -->
                <div class="col-md-12 text-center mt-4">
                    <button type="submit" class="btn btn-primary" style="background-color: #0C314D;">Sign Up</button>
                </div>
            </div>
        </form>
    </div>
</div>
